var samImage,samImageSources,wheelReel,popupSecond,popupSecondBtn,playBtn=document.querySelector(".bonus__main-wheel-btn"),main=document.querySelector(".bonus__main"),wheel=document.querySelector(".bonus__main-wheel-reel"),overlay=document.querySelector(".bonus__overlay"),popupFirst=document.querySelector(".bonus__firstWin"),popupFirstBtn=document.querySelector(".bonus__firstWin-btn"),overflow=document.querySelector("body"),wrapper=document.querySelector(".bonus"),bubbleText=document.querySelector(".bonus__main-bubble");function initSamImageSelectors(){samImage=document.querySelector(".bonus__main-image-img img"),samImageSources=document.querySelectorAll(".bonus__main-image-img source"),wheelReel=document.querySelector(".bonus__main-wheel-reel"),popupSecond=document.querySelector(".bonus__secondWin"),popupSecondBtn=document.querySelector(".bonus__secondWin-btn")}var triesCounter=0,babbleTextAfterRotation="Smrtniče, imaš jednu priliku";function runFirstRotation(){wheel.classList.add("reel-rotation-first"),playBtn.classList.remove("pulse-btn"),playBtn.style.cursor="default",wrapper.style.pointerEvents="none",setTimeout(function(){doAfterFirstRotation()},6e3),triesCounter++}function doAfterFirstRotation(){wheel.style.transform="rotate(992deg)",wheel.classList.remove("reel-rotation-first"),setTimeout(function(){changeSamImage(),changeWheelReel()},1e3),displayPopup(popupFirst),wrapper.style.pointerEvents="auto",overflow.style.overflow="hidden",setTimeout(function(){playBtn.classList.add("pulse-btn"),playBtn.style.cursor="pointer"},1200)}function runSecondRotation(){wheel.classList.add("reel-rotation-second"),playBtn.classList.remove("pulse-btn"),playBtn.style.cursor="default",overflow.style.overflow="hidden",wrapper.style.pointerEvents="none",setTimeout(function(){doAfterSecondRotation()},6e3),triesCounter++}function changeSamImage(){samImage&&samImageSources&&(samImageSources.forEach(function(e){var t=e.srcset;t.includes("sam-mob.png")?e.srcset="img/sam-mob-second.png":t.includes("sam-tab.png")?e.srcset="img/sam-tab-second.png":t.includes("sam-desc.png")&&(e.srcset="img/sam-desc-second.png")}),samImage.src="img/sam-desc-second.png")}function changeWheelReel(){wheelReel&&(wheelReel.style.backgroundImage='url("img/wheel-reel-second.png")')}function doAfterSecondRotation(){displayPopup(popupSecond),wrapper.style.pointerEvents="auto",popupSecondBtn&&(popupSecondBtn.onclick=function(){var e="https://tds.favbet.partners";localStorage.getItem("redirectUrl")&&(e=localStorage.getItem("redirectUrl")),window.location.href=e})}function displayPopup(e){overlay.classList.remove("opacity-overlay"),e.classList.remove("hide")}playBtn.addEventListener("click",function(){(0===triesCounter?runFirstRotation:runSecondRotation)()}),popupFirstBtn.addEventListener("click",function(){overlay.classList.add("opacity-overlay"),popupFirst.classList.add("hide"),overflow.style.overflow="unset"}),window.addEventListener("orientationchange",function(){window.location.reload()}),document.addEventListener("DOMContentLoaded",function(){initSamImageSelectors()})(function(){var e,n=new URL(window.location.href),r=["l","utm_source","utm_medium","utm_campaign","utm_term","utm_content","param1","param2"];n.searchParams.has("redirectUrl")&&4===(e=new URL(n.searchParams.get("redirectUrl"))).href.match(/\//g).length&&e.searchParams.get("l")&&localStorage.setItem("redirectUrl",e.href),r.forEach(function(e){n.searchParams.has(e)&&localStorage.setItem(e,n.searchParams.get(e))}),["affid","cpaid"].forEach(function(e){n.searchParams.has(e)&&localStorage.setItem(e,n.searchParams.get(e))}),window.addEventListener("click",function(e){var t,o=e.target.closest("a");"https://tds.favbet.partners"===o.getAttribute("href")&&o&&(e.preventDefault(),localStorage.getItem("redirectUrl")?t=new URL(localStorage.getItem("redirectUrl")):(t=new URL(o.href),affid=localStorage.getItem("affid"),cpaid=localStorage.getItem("cpaid"),affid&&cpaid&&(t.pathname="/"+affid+"/"+cpaid)),r.forEach(function(e){n.searchParams.has(e)&&t.searchParams.set(e,localStorage.getItem(e))}),document.location.href=t)})})();